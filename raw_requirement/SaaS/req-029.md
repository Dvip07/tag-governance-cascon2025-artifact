# Requirement req-029 (SaaS)

SA-014: Role-Based Audit Log Querying With Session Consistency
Title:
Enhanced Audit Log Querying by User Role With Session State Consistency

Strategic Impact:
Supporting customers with strict regulatory needs requires granular, auditable log access—not just by username, but by role context at time of action. This feature will elevate our compliance offering, streamlining internal investigations and providing traceability for clients in finance, healthcare, and the public sector.

Requirements:

Granular Log Data:

Log every user action with timestamp, resource, session ID, and role (at that moment).

Retain role changes within session, ensuring accurate historical context even if roles shift mid-session.

Role-Based Query Interface:

Enable compliance and admin users to query audit logs by role, resource, and action type.

Provide advanced filters (e.g., “show all edits by anyone in Finance last month”).

Session Consistency Handling:

If a user changes roles within a single session, maintain a clear timeline of each role for each action.

Flag anomalous or rapid role switching for investigation.

Reporting & Export:

Allow exports in CSV, JSON, and PDF, with compliance headers and digital signatures.

Provide automated weekly/monthly summaries by role.

Edge Cases:

For deleted users or orphaned actions, maintain logs with anonymized IDs and original role context.

Ensure log storage meets retention and security standards (SOC2, GDPR, HIPAA).

Docs & Training:

Update compliance manuals and onboarding for audit log best practices.

Dependencies & Constraints:

May require backend schema changes and session management upgrades.

Export functionality must support high-volume logs.

KPIs:

<2s average query response for 12 months of logs

100% traceability of role context per action

Zero compliance violations due to audit log gaps